{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@yohtozze/markdown-paste/webpack/bootstrap","webpack://@yohtozze/markdown-paste/webpack/runtime/compat get default export","webpack://@yohtozze/markdown-paste/webpack/runtime/define property getters","webpack://@yohtozze/markdown-paste/webpack/runtime/hasOwnProperty shorthand","webpack://@yohtozze/markdown-paste/webpack/runtime/make namespace object","webpack://@yohtozze/markdown-paste/external root \"flarum.core.compat['forum/app']\"","webpack://@yohtozze/markdown-paste/external root \"flarum.core.compat['common/extend']\"","webpack://@yohtozze/markdown-paste/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@yohtozze/markdown-paste/./node_modules/turndown/lib/turndown.browser.es.js","webpack://@yohtozze/markdown-paste/./src/forum/index.js","webpack://@yohtozze/markdown-paste/./src/forum/editPaste.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","function extend (destination) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) destination[key] = source[key];\n    }\n  }\n  return destination\n}\n\nfunction repeat (character, count) {\n  return Array(count + 1).join(character)\n}\n\nfunction trimLeadingNewlines (string) {\n  return string.replace(/^\\n*/, '')\n}\n\nfunction trimTrailingNewlines (string) {\n  // avoid match-at-end regexp bottleneck, see #370\n  var indexEnd = string.length;\n  while (indexEnd > 0 && string[indexEnd - 1] === '\\n') indexEnd--;\n  return string.substring(0, indexEnd)\n}\n\nvar blockElements = [\n  'ADDRESS', 'ARTICLE', 'ASIDE', 'AUDIO', 'BLOCKQUOTE', 'BODY', 'CANVAS',\n  'CENTER', 'DD', 'DIR', 'DIV', 'DL', 'DT', 'FIELDSET', 'FIGCAPTION', 'FIGURE',\n  'FOOTER', 'FORM', 'FRAMESET', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'HEADER',\n  'HGROUP', 'HR', 'HTML', 'ISINDEX', 'LI', 'MAIN', 'MENU', 'NAV', 'NOFRAMES',\n  'NOSCRIPT', 'OL', 'OUTPUT', 'P', 'PRE', 'SECTION', 'TABLE', 'TBODY', 'TD',\n  'TFOOT', 'TH', 'THEAD', 'TR', 'UL'\n];\n\nfunction isBlock (node) {\n  return is(node, blockElements)\n}\n\nvar voidElements = [\n  'AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT',\n  'KEYGEN', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'\n];\n\nfunction isVoid (node) {\n  return is(node, voidElements)\n}\n\nfunction hasVoid (node) {\n  return has(node, voidElements)\n}\n\nvar meaningfulWhenBlankElements = [\n  'A', 'TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TH', 'TD', 'IFRAME', 'SCRIPT',\n  'AUDIO', 'VIDEO'\n];\n\nfunction isMeaningfulWhenBlank (node) {\n  return is(node, meaningfulWhenBlankElements)\n}\n\nfunction hasMeaningfulWhenBlank (node) {\n  return has(node, meaningfulWhenBlankElements)\n}\n\nfunction is (node, tagNames) {\n  return tagNames.indexOf(node.nodeName) >= 0\n}\n\nfunction has (node, tagNames) {\n  return (\n    node.getElementsByTagName &&\n    tagNames.some(function (tagName) {\n      return node.getElementsByTagName(tagName).length\n    })\n  )\n}\n\nvar rules = {};\n\nrules.paragraph = {\n  filter: 'p',\n\n  replacement: function (content) {\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.lineBreak = {\n  filter: 'br',\n\n  replacement: function (content, node, options) {\n    return options.br + '\\n'\n  }\n};\n\nrules.heading = {\n  filter: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n  replacement: function (content, node, options) {\n    var hLevel = Number(node.nodeName.charAt(1));\n\n    if (options.headingStyle === 'setext' && hLevel < 3) {\n      var underline = repeat((hLevel === 1 ? '=' : '-'), content.length);\n      return (\n        '\\n\\n' + content + '\\n' + underline + '\\n\\n'\n      )\n    } else {\n      return '\\n\\n' + repeat('#', hLevel) + ' ' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.blockquote = {\n  filter: 'blockquote',\n\n  replacement: function (content) {\n    content = content.replace(/^\\n+|\\n+$/g, '');\n    content = content.replace(/^/gm, '> ');\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.list = {\n  filter: ['ul', 'ol'],\n\n  replacement: function (content, node) {\n    var parent = node.parentNode;\n    if (parent.nodeName === 'LI' && parent.lastElementChild === node) {\n      return '\\n' + content\n    } else {\n      return '\\n\\n' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.listItem = {\n  filter: 'li',\n\n  replacement: function (content, node, options) {\n    content = content\n      .replace(/^\\n+/, '') // remove leading newlines\n      .replace(/\\n+$/, '\\n') // replace trailing newlines with just a single one\n      .replace(/\\n/gm, '\\n    '); // indent\n    var prefix = options.bulletListMarker + '   ';\n    var parent = node.parentNode;\n    if (parent.nodeName === 'OL') {\n      var start = parent.getAttribute('start');\n      var index = Array.prototype.indexOf.call(parent.children, node);\n      prefix = (start ? Number(start) + index : index + 1) + '.  ';\n    }\n    return (\n      prefix + content + (node.nextSibling && !/\\n$/.test(content) ? '\\n' : '')\n    )\n  }\n};\n\nrules.indentedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'indented' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    return (\n      '\\n\\n    ' +\n      node.firstChild.textContent.replace(/\\n/g, '\\n    ') +\n      '\\n\\n'\n    )\n  }\n};\n\nrules.fencedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'fenced' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var className = node.firstChild.getAttribute('class') || '';\n    var language = (className.match(/language-(\\S+)/) || [null, ''])[1];\n    var code = node.firstChild.textContent;\n\n    var fenceChar = options.fence.charAt(0);\n    var fenceSize = 3;\n    var fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');\n\n    var match;\n    while ((match = fenceInCodeRegex.exec(code))) {\n      if (match[0].length >= fenceSize) {\n        fenceSize = match[0].length + 1;\n      }\n    }\n\n    var fence = repeat(fenceChar, fenceSize);\n\n    return (\n      '\\n\\n' + fence + language + '\\n' +\n      code.replace(/\\n$/, '') +\n      '\\n' + fence + '\\n\\n'\n    )\n  }\n};\n\nrules.horizontalRule = {\n  filter: 'hr',\n\n  replacement: function (content, node, options) {\n    return '\\n\\n' + options.hr + '\\n\\n'\n  }\n};\n\nrules.inlineLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'inlined' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    return '[' + content + '](' + href + title + ')'\n  }\n};\n\nrules.referenceLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'referenced' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    var replacement;\n    var reference;\n\n    switch (options.linkReferenceStyle) {\n      case 'collapsed':\n        replacement = '[' + content + '][]';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      case 'shortcut':\n        replacement = '[' + content + ']';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      default:\n        var id = this.references.length + 1;\n        replacement = '[' + content + '][' + id + ']';\n        reference = '[' + id + ']: ' + href + title;\n    }\n\n    this.references.push(reference);\n    return replacement\n  },\n\n  references: [],\n\n  append: function (options) {\n    var references = '';\n    if (this.references.length) {\n      references = '\\n\\n' + this.references.join('\\n') + '\\n\\n';\n      this.references = []; // Reset references\n    }\n    return references\n  }\n};\n\nrules.emphasis = {\n  filter: ['em', 'i'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.emDelimiter + content + options.emDelimiter\n  }\n};\n\nrules.strong = {\n  filter: ['strong', 'b'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.strongDelimiter + content + options.strongDelimiter\n  }\n};\n\nrules.code = {\n  filter: function (node) {\n    var hasSiblings = node.previousSibling || node.nextSibling;\n    var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n    return node.nodeName === 'CODE' && !isCodeBlock\n  },\n\n  replacement: function (content) {\n    if (!content) return ''\n    content = content.replace(/\\r?\\n|\\r/g, ' ');\n\n    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? ' ' : '';\n    var delimiter = '`';\n    var matches = content.match(/`+/gm) || [];\n    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + '`';\n\n    return delimiter + extraSpace + content + extraSpace + delimiter\n  }\n};\n\nrules.image = {\n  filter: 'img',\n\n  replacement: function (content, node) {\n    var alt = cleanAttribute(node.getAttribute('alt'));\n    var src = node.getAttribute('src') || '';\n    var title = cleanAttribute(node.getAttribute('title'));\n    var titlePart = title ? ' \"' + title + '\"' : '';\n    return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : ''\n  }\n};\n\nfunction cleanAttribute (attribute) {\n  return attribute ? attribute.replace(/(\\n+\\s*)+/g, '\\n') : ''\n}\n\n/**\n * Manages a collection of rules used to convert HTML to Markdown\n */\n\nfunction Rules (options) {\n  this.options = options;\n  this._keep = [];\n  this._remove = [];\n\n  this.blankRule = {\n    replacement: options.blankReplacement\n  };\n\n  this.keepReplacement = options.keepReplacement;\n\n  this.defaultRule = {\n    replacement: options.defaultReplacement\n  };\n\n  this.array = [];\n  for (var key in options.rules) this.array.push(options.rules[key]);\n}\n\nRules.prototype = {\n  add: function (key, rule) {\n    this.array.unshift(rule);\n  },\n\n  keep: function (filter) {\n    this._keep.unshift({\n      filter: filter,\n      replacement: this.keepReplacement\n    });\n  },\n\n  remove: function (filter) {\n    this._remove.unshift({\n      filter: filter,\n      replacement: function () {\n        return ''\n      }\n    });\n  },\n\n  forNode: function (node) {\n    if (node.isBlank) return this.blankRule\n    var rule;\n\n    if ((rule = findRule(this.array, node, this.options))) return rule\n    if ((rule = findRule(this._keep, node, this.options))) return rule\n    if ((rule = findRule(this._remove, node, this.options))) return rule\n\n    return this.defaultRule\n  },\n\n  forEach: function (fn) {\n    for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n  }\n};\n\nfunction findRule (rules, node, options) {\n  for (var i = 0; i < rules.length; i++) {\n    var rule = rules[i];\n    if (filterValue(rule, node, options)) return rule\n  }\n  return void 0\n}\n\nfunction filterValue (rule, node, options) {\n  var filter = rule.filter;\n  if (typeof filter === 'string') {\n    if (filter === node.nodeName.toLowerCase()) return true\n  } else if (Array.isArray(filter)) {\n    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true\n  } else if (typeof filter === 'function') {\n    if (filter.call(rule, node, options)) return true\n  } else {\n    throw new TypeError('`filter` needs to be a string, array, or function')\n  }\n}\n\n/**\n * The collapseWhitespace function is adapted from collapse-whitespace\n * by Luc Thevenard.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n *\n * @param {Object} options\n */\nfunction collapseWhitespace (options) {\n  var element = options.element;\n  var isBlock = options.isBlock;\n  var isVoid = options.isVoid;\n  var isPre = options.isPre || function (node) {\n    return node.nodeName === 'PRE'\n  };\n\n  if (!element.firstChild || isPre(element)) return\n\n  var prevText = null;\n  var keepLeadingWs = false;\n\n  var prev = null;\n  var node = next(prev, element, isPre);\n\n  while (node !== element) {\n    if (node.nodeType === 3 || node.nodeType === 4) { // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue\n      }\n\n      node.data = text;\n\n      prevText = node;\n    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        keepLeadingWs = false;\n      } else if (isVoid(node) || isPre(node)) {\n        // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n        prevText = null;\n        keepLeadingWs = true;\n      } else if (prevText) {\n        // Drop protection if set previously.\n        keepLeadingWs = false;\n      }\n    } else {\n      node = remove(node);\n      continue\n    }\n\n    var nextNode = next(prev, node, isPre);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove (node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next\n}\n\n/**\n * next(prev, current, isPre) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @param {Function} isPre\n * @return {Node}\n */\nfunction next (prev, current, isPre) {\n  if ((prev && prev.parentNode === current) || isPre(current)) {\n    return current.nextSibling || current.parentNode\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode\n}\n\n/*\n * Set up window for Node.js\n */\n\nvar root = (typeof window !== 'undefined' ? window : {});\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHTMLNatively () {\n  var Parser = root.DOMParser;\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse\n}\n\nfunction createHTMLParser () {\n  var Parser = function () {};\n\n  {\n    if (shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new window.ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    }\n  }\n  return Parser\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (window.ActiveXObject) useActiveX = true;\n  }\n  return useActiveX\n}\n\nvar HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\nfunction RootNode (input, options) {\n  var root;\n  if (typeof input === 'string') {\n    var doc = htmlParser().parseFromString(\n      // DOM parsers arrange elements in the <head> and <body>.\n      // Wrapping in a custom element ensures elements are reliably arranged in\n      // a single element.\n      '<x-turndown id=\"turndown-root\">' + input + '</x-turndown>',\n      'text/html'\n    );\n    root = doc.getElementById('turndown-root');\n  } else {\n    root = input.cloneNode(true);\n  }\n  collapseWhitespace({\n    element: root,\n    isBlock: isBlock,\n    isVoid: isVoid,\n    isPre: options.preformattedCode ? isPreOrCode : null\n  });\n\n  return root\n}\n\nvar _htmlParser;\nfunction htmlParser () {\n  _htmlParser = _htmlParser || new HTMLParser();\n  return _htmlParser\n}\n\nfunction isPreOrCode (node) {\n  return node.nodeName === 'PRE' || node.nodeName === 'CODE'\n}\n\nfunction Node (node, options) {\n  node.isBlock = isBlock(node);\n  node.isCode = node.nodeName === 'CODE' || node.parentNode.isCode;\n  node.isBlank = isBlank(node);\n  node.flankingWhitespace = flankingWhitespace(node, options);\n  return node\n}\n\nfunction isBlank (node) {\n  return (\n    !isVoid(node) &&\n    !isMeaningfulWhenBlank(node) &&\n    /^\\s*$/i.test(node.textContent) &&\n    !hasVoid(node) &&\n    !hasMeaningfulWhenBlank(node)\n  )\n}\n\nfunction flankingWhitespace (node, options) {\n  if (node.isBlock || (options.preformattedCode && node.isCode)) {\n    return { leading: '', trailing: '' }\n  }\n\n  var edges = edgeWhitespace(node.textContent);\n\n  // abandon leading ASCII WS if left-flanked by ASCII WS\n  if (edges.leadingAscii && isFlankedByWhitespace('left', node, options)) {\n    edges.leading = edges.leadingNonAscii;\n  }\n\n  // abandon trailing ASCII WS if right-flanked by ASCII WS\n  if (edges.trailingAscii && isFlankedByWhitespace('right', node, options)) {\n    edges.trailing = edges.trailingNonAscii;\n  }\n\n  return { leading: edges.leading, trailing: edges.trailing }\n}\n\nfunction edgeWhitespace (string) {\n  var m = string.match(/^(([ \\t\\r\\n]*)(\\s*))[\\s\\S]*?((\\s*?)([ \\t\\r\\n]*))$/);\n  return {\n    leading: m[1], // whole string for whitespace-only strings\n    leadingAscii: m[2],\n    leadingNonAscii: m[3],\n    trailing: m[4], // empty for whitespace-only strings\n    trailingNonAscii: m[5],\n    trailingAscii: m[6]\n  }\n}\n\nfunction isFlankedByWhitespace (side, node, options) {\n  var sibling;\n  var regExp;\n  var isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  } else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    } else if (options.preformattedCode && sibling.nodeName === 'CODE') {\n      isFlanked = false;\n    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked\n}\n\nvar reduce = Array.prototype.reduce;\nvar escapes = [\n  [/\\\\/g, '\\\\\\\\'],\n  [/\\*/g, '\\\\*'],\n  [/^-/g, '\\\\-'],\n  [/^\\+ /g, '\\\\+ '],\n  [/^(=+)/g, '\\\\$1'],\n  [/^(#{1,6}) /g, '\\\\$1 '],\n  [/`/g, '\\\\`'],\n  [/^~~~/g, '\\\\~~~'],\n  [/\\[/g, '\\\\['],\n  [/\\]/g, '\\\\]'],\n  [/^>/g, '\\\\>'],\n  [/_/g, '\\\\_'],\n  [/^(\\d+)\\. /g, '$1\\\\. ']\n];\n\nfunction TurndownService (options) {\n  if (!(this instanceof TurndownService)) return new TurndownService(options)\n\n  var defaults = {\n    rules: rules,\n    headingStyle: 'setext',\n    hr: '* * *',\n    bulletListMarker: '*',\n    codeBlockStyle: 'indented',\n    fence: '```',\n    emDelimiter: '_',\n    strongDelimiter: '**',\n    linkStyle: 'inlined',\n    linkReferenceStyle: 'full',\n    br: '  ',\n    preformattedCode: false,\n    blankReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' : ''\n    },\n    keepReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    },\n    defaultReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + content + '\\n\\n' : content\n    }\n  };\n  this.options = extend({}, defaults, options);\n  this.rules = new Rules(this.options);\n}\n\nTurndownService.prototype = {\n  /**\n   * The entry point for converting a string or DOM node to Markdown\n   * @public\n   * @param {String|HTMLElement} input The string or DOM node to convert\n   * @returns A Markdown representation of the input\n   * @type String\n   */\n\n  turndown: function (input) {\n    if (!canConvert(input)) {\n      throw new TypeError(\n        input + ' is not a string, or an element/document/fragment node.'\n      )\n    }\n\n    if (input === '') return ''\n\n    var output = process.call(this, new RootNode(input, this.options));\n    return postProcess.call(this, output)\n  },\n\n  /**\n   * Add one or more plugins\n   * @public\n   * @param {Function|Array} plugin The plugin or array of plugins to add\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  use: function (plugin) {\n    if (Array.isArray(plugin)) {\n      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n    } else if (typeof plugin === 'function') {\n      plugin(this);\n    } else {\n      throw new TypeError('plugin must be a Function or an Array of Functions')\n    }\n    return this\n  },\n\n  /**\n   * Adds a rule\n   * @public\n   * @param {String} key The unique key of the rule\n   * @param {Object} rule The rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  addRule: function (key, rule) {\n    this.rules.add(key, rule);\n    return this\n  },\n\n  /**\n   * Keep a node (as HTML) that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  keep: function (filter) {\n    this.rules.keep(filter);\n    return this\n  },\n\n  /**\n   * Remove a node that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  remove: function (filter) {\n    this.rules.remove(filter);\n    return this\n  },\n\n  /**\n   * Escapes Markdown syntax\n   * @public\n   * @param {String} string The string to escape\n   * @returns A string with Markdown syntax escaped\n   * @type String\n   */\n\n  escape: function (string) {\n    return escapes.reduce(function (accumulator, escape) {\n      return accumulator.replace(escape[0], escape[1])\n    }, string)\n  }\n};\n\n/**\n * Reduces a DOM node down to its Markdown string equivalent\n * @private\n * @param {HTMLElement} parentNode The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction process (parentNode) {\n  var self = this;\n  return reduce.call(parentNode.childNodes, function (output, node) {\n    node = new Node(node, self.options);\n\n    var replacement = '';\n    if (node.nodeType === 3) {\n      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);\n    } else if (node.nodeType === 1) {\n      replacement = replacementForNode.call(self, node);\n    }\n\n    return join(output, replacement)\n  }, '')\n}\n\n/**\n * Appends strings as each rule requires and trims the output\n * @private\n * @param {String} output The conversion output\n * @returns A trimmed version of the ouput\n * @type String\n */\n\nfunction postProcess (output) {\n  var self = this;\n  this.rules.forEach(function (rule) {\n    if (typeof rule.append === 'function') {\n      output = join(output, rule.append(self.options));\n    }\n  });\n\n  return output.replace(/^[\\t\\r\\n]+/, '').replace(/[\\t\\r\\n\\s]+$/, '')\n}\n\n/**\n * Converts an element node to its Markdown equivalent\n * @private\n * @param {HTMLElement} node The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction replacementForNode (node) {\n  var rule = this.rules.forNode(node);\n  var content = process.call(this, node);\n  var whitespace = node.flankingWhitespace;\n  if (whitespace.leading || whitespace.trailing) content = content.trim();\n  return (\n    whitespace.leading +\n    rule.replacement(content, node, this.options) +\n    whitespace.trailing\n  )\n}\n\n/**\n * Joins replacement to the current output with appropriate number of new lines\n * @private\n * @param {String} output The current conversion output\n * @param {String} replacement The string to append to the output\n * @returns Joined output\n * @type String\n */\n\nfunction join (output, replacement) {\n  var s1 = trimTrailingNewlines(output);\n  var s2 = trimLeadingNewlines(replacement);\n  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);\n  var separator = '\\n\\n'.substring(0, nls);\n\n  return s1 + separator + s2\n}\n\n/**\n * Determines whether an input can be converted\n * @private\n * @param {String|HTMLElement} input Describe this parameter\n * @returns Describe what it returns\n * @type String|Object|Array|Boolean|Number\n */\n\nfunction canConvert (input) {\n  return (\n    input != null && (\n      typeof input === 'string' ||\n      (input.nodeType && (\n        input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11\n      ))\n    )\n  )\n}\n\nexport default TurndownService;\n","import app from 'flarum/forum/app';\n\nimport editPaste from './editPaste';\n\napp.initializers.add('yohtozze-mdpaste', () => {\n  editPaste();\n});\n","import { extend } from 'flarum/common/extend';\r\nimport TextEditor from 'flarum/common/components/TextEditor';\r\n\r\nimport TurndownService from 'turndown';\r\n\r\nexport default function editPaste() {\r\n  extend(TextEditor.prototype, 'oncreate', function () {\r\n    let editor=this.$('.TextEditor-editor')[0];\r\n    editor.onpaste=(event)=>{\r\n      let clip = event.clipboardData.getData('text/html');\r\n      if(!clip)return;\r\n\r\n      event.preventDefault();\r\n\r\n      let domtxt = new DOMParser().parseFromString(clip,'text/html');\r\n      let turndownService = new TurndownService();\r\n      let markdown = turndownService.turndown(domtxt.body);\r\n\r\n      this.attrs.composer.editor.insertAtCursor(markdown);\r\n    };\r\n  });\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","repeat","character","count","Array","join","blockElements","isBlock","node","is","voidElements","isVoid","meaningfulWhenBlankElements","tagNames","indexOf","nodeName","has","getElementsByTagName","some","tagName","length","rules","cleanAttribute","attribute","replace","Rules","options","this","_keep","_remove","blankRule","replacement","blankReplacement","keepReplacement","defaultRule","defaultReplacement","array","push","findRule","i","rule","filterValue","filter","toLowerCase","isArray","TypeError","remove","next","nextSibling","parentNode","removeChild","prev","current","isPre","firstChild","paragraph","content","lineBreak","br","heading","hLevel","Number","charAt","headingStyle","blockquote","list","parent","lastElementChild","listItem","prefix","bulletListMarker","start","getAttribute","index","children","test","indentedCodeBlock","codeBlockStyle","textContent","fencedCodeBlock","match","language","code","fenceChar","fence","fenceSize","fenceInCodeRegex","RegExp","exec","horizontalRule","hr","inlineLink","linkStyle","href","title","referenceLink","reference","linkReferenceStyle","id","references","append","emphasis","trim","emDelimiter","strong","strongDelimiter","hasSiblings","previousSibling","isCodeBlock","extraSpace","delimiter","matches","image","alt","src","add","unshift","keep","forNode","isBlank","forEach","fn","Parser","_htmlParser","root","window","HTMLParser","DOMParser","canParse","parseFromString","e","canParseHTMLNatively","useActiveX","document","implementation","createHTMLDocument","open","ActiveXObject","shouldUseActiveX","string","doc","designMode","write","close","RootNode","input","element","prevText","keepLeadingWs","nodeType","text","data","substr","nextNode","collapseWhitespace","getElementById","cloneNode","preformattedCode","isPreOrCode","Node","isCode","isMeaningfulWhenBlank","hasVoid","hasMeaningfulWhenBlank","flankingWhitespace","leading","trailing","m","edges","leadingAscii","leadingNonAscii","trailingNonAscii","trailingAscii","isFlankedByWhitespace","side","sibling","regExp","isFlanked","nodeValue","reduce","escapes","TurndownService","defaults","outerHTML","destination","arguments","source","extend","process","self","childNodes","output","escape","replacementForNode","postProcess","whitespace","s1","indexEnd","substring","trimTrailingNewlines","s2","nls","Math","max","turndown","canConvert","use","plugin","addRule","accumulator","app","TextEditor","_this","$","onpaste","event","clip","clipboardData","getData","preventDefault","domtxt","markdown","body","attrs","composer","editor","insertAtCursor"],"sourceRoot":""}